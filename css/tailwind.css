@import "tailwindcss";
@import "./typography.css";
@plugin "@tailwindcss/typography";
@custom-variant dark (&:where(.dark, .dark *));

@theme inline {
  --font-sans: var(--font-nunito), ui-sans-serif, system-ui, sans-serif,
    "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  --font-greeting: var(--font-playpen-sans);
  --font-jetbrains-mono: var(--font-jetbrains-mono), ui-monospace,
    SFMono-Regular, "SF Mono", Consolas, "Liberation Mono", Menlo, monospace;
  --font-geist-mono: var(--font-geist-mono), ui-monospace, SFMono-Regular,
    "SF Mono", Consolas, "Liberation Mono", Menlo, monospace;
}

@theme {
  --animate-wiggle: wiggle 7s linear infinite;
  --animate-music-bar-1: music-bar-1 0.8s linear infinite;
  --animate-music-bar-2: music-bar-2 0.8s linear infinite;
  --animate-music-bar-3: music-bar-3 0.8s linear infinite;
  --animate-music-bar-4: music-bar-4 0.8s linear infinite;
  --animate-scale-up: scale-up 150ms ease-in-out forwards;

  @keyframes wiggle {
    0% {
      transform: rotate(0deg);
    }
    50% {
      transform: rotate(180deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  @keyframes music-bar-1 {
    0%,
    100% {
      height: 0%;
    }
    50% {
      height: 70%;
    }
  }

  @keyframes music-bar-2 {
    0%,
    100% {
      height: 50%;
    }
    25% {
      height: 0%;
    }
    75% {
      height: 100%;
    }
  }

  @keyframes music-bar-3 {
    0%,
    100% {
      height: 70%;
    }
    15% {
      height: 100%;
    }
    65% {
      height: 0%;
    }
  }

  @keyframes music-bar-4 {
    0%,
    100% {
      height: 50%;
    }
    35.7% {
      height: 0%;
    }
    85.7% {
      height: 70%;
    }
  }

  @keyframes scale-up {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.18);
    }
    100% {
      transform: scale(1);
    }
  }

  --shadow-demure: rgba(0, 0, 0, 0.3) 0 35px 60px -15px;
  --shadow-book-pages:
    10px 40px 40px -10px #00000030, inset -2px 0 0 gray, inset -3px 0 0 #dbdbdb,
    inset -4px 0 0 white, inset -5px 0 0 #dbdbdb, inset -6px 0 0 white,
    inset -7px 0 0 #dbdbdb, inset -8px 0 0 white, inset -9px 0 0 #dbdbdb;
  --shadow-mondegreen:
    5px 5px rgba(0, 98, 90, 0.4), 10px 10px rgba(0, 98, 90, 0.3),
    15px 15px rgba(0, 98, 90, 0.2), 20px 20px rgba(0, 98, 90, 0.1),
    25px 25px rgba(0, 98, 90, 0.05);

  --color-primary-50: #fff7ed;
  --color-primary-100: #ffedd5;
  --color-primary-200: #fed7aa;
  --color-primary-300: #fdba74;
  --color-primary-400: #fb923c;
  --color-primary-500: #f97316;
  --color-primary-600: #ea580c;
  --color-primary-700: #c2410c;
  --color-primary-800: #9a3412;
  --color-primary-900: #7c2d12;
  --color-primary-950: #431407;

  /* Core palette: Black, Orange (primary), Green (accents) */
  --color-dark: #000000; /* darker black for dark mode surfaces */
  --color-spotify: #16a34a; /* green (used as accent) */
  --color-accent-orange: var(--color-primary-500);
  --color-accent-green: var(--color-spotify);
  --color-goodreads: #372213;
  --color-facebook: #1877f2;
  --color-twitter: #0f1419;
  --color-linkedin: #0077b5;
  --color-solarized-light: #fdfaf6;
  --color-github-dark-dimmed: #22272e;
  --color-code-block: #1f1f1f;

  /* Generic UI variables used across components */
  --color-bg: #ffffff;
  --color-text: #0b0b0b;
  --color-border: #e5e7eb; /* light border (tailwind gray-200) */
  --color-bg-dark: #000000;
  --color-text-dark: #e6e6e6;
  --color-border-dark: #2b2b2b;
}

/* Light / Dark overrides: components can reference the variables above
   and they will switch when the page has the .dark class (Tailwind convention) */
:root {
  --color-bg: #ffffff;
  --color-text: #0b0b0b;
  --color-border: #e5e7eb;
  --color-accent-orange: var(--color-primary-500);
  --color-accent-green: var(--color-accent-orange);
}

.dark,
.dark * {
  --color-bg: var(--color-bg-dark);
  --color-text: var(--color-text-dark);
  --color-border: var(--color-border-dark);
  --color-accent-orange: var(--color-primary-400);
  --color-accent-green: #16a34a;
}

/* Helper classes for easy theming */
.accent {
  color: var(--color-accent-orange);
}
.accent-bg {
  background-color: var(--color-accent-orange);
}
.accent-green {
  color: var(--color-accent-green);
}
.accent-green-bg {
  background-color: var(--color-accent-green);
}

/* Themed Form Input Styles */
.themed-input {
  width: 100%;
  padding: 0.75rem;
  border: 2px solid #000;
  border-radius: 0.5rem;
  background-color: #fff;
  color: #000;
  font-size: 1rem;
  transition: all 0.2s ease-in-out;
}

.themed-input:focus {
  outline: none;
  border-color: var(--color-accent-orange);
  box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
}

.themed-input::placeholder {
  color: #6b7280;
}

.dark .themed-input {
  border-color: #fff;
  background-color: #000;
  color: #fff;
}

.dark .themed-input:focus {
  border-color: var(--color-accent-green);
  box-shadow: 0 0 0 3px rgba(22, 163, 74, 0.2);
}

.dark .themed-input::placeholder {
  color: #9ca3af;
}

/* Themed textarea styles */
.themed-textarea {
  width: 100%;
  padding: 0.75rem;
  border: 2px solid #000;
  border-radius: 0.5rem;
  background-color: #fff;
  color: #000;
  font-size: 1rem;
  transition: all 0.2s ease-in-out;
  resize: vertical;
  min-height: 100px;
}

.themed-textarea:focus {
  outline: none;
  border-color: var(--color-accent-orange);
  box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
}

.themed-textarea::placeholder {
  color: #6b7280;
}

.dark .themed-textarea {
  border-color: #fff;
  background-color: #000;
  color: #fff;
}

.dark .themed-textarea:focus {
  border-color: var(--color-accent-green);
  box-shadow: 0 0 0 3px rgba(22, 163, 74, 0.2);
}

.dark .themed-textarea::placeholder {
  color: #9ca3af;
}

/* Themed label styles */
.themed-label {
  display: block;
  font-size: 0.875rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: #000;
}

.dark .themed-label {
  color: #fff;
}

/* Themed checkbox styles */
.themed-checkbox {
  width: 1.25rem;
  height: 1.25rem;
  border: 2px solid #000;
  border-radius: 0.25rem;
  background-color: #fff;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
}

.themed-checkbox:checked {
  background-color: var(--color-accent-orange);
  border-color: var(--color-accent-orange);
}

.themed-checkbox:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
}

.dark .themed-checkbox {
  border-color: #fff;
  background-color: #000;
}

.dark .themed-checkbox:checked {
  background-color: var(--color-accent-green);
  border-color: var(--color-accent-green);
}

.dark .themed-checkbox:focus {
  box-shadow: 0 0 0 3px rgba(22, 163, 74, 0.2);
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-border, currentcolor);
  }
  button:not(:disabled),
  [role="button"]:not(:disabled) {
    @apply cursor-pointer;
  }
  code,
  kbd,
  pre,
  samp {
    font-family: var(--font-jetbrains-mono), monospace;
    font-weight: 500;
  }
}

/* Themed badge styles for activities */
.themed-badge {
  /* Use inline-flex to vertically center content and prevent inconsistent heights */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;

  /* Prevent label wrapping on small screens so height stays consistent */
  white-space: nowrap;
  line-height: 1;

  /* Keep the spacing compact and match text-xs (same as Tailwind `text-xs`) */
  padding: 0.125rem 0.5rem;
  font-size: 0.75rem;
  font-weight: 500;
  min-height: 1.25rem;
  border-radius: 9999px;
  background-color: rgba(234, 88, 12, 0.1);
  color: rgb(234, 88, 12);
  border: none;
  box-shadow: none;
  transition: none;
}

.themed-badge:hover {
  transform: none;
  box-shadow: none;
}

.dark .themed-badge {
  background-color: rgba(34, 197, 94, 0.1);
  color: rgb(34, 197, 94);
}

/* Platform badge hover styles - used in the game cards for platform chips */
.platform-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  white-space: nowrap;
  line-height: 1;
  padding: 0.125rem 0.5rem;
  font-size: 0.75rem;
  font-weight: 500;
  min-height: 1.25rem;
  border-radius: 9999px;
  background-color: rgba(229, 231, 235, 1); /* tailwind gray-200 */
  color: rgb(17, 24, 39); /* tailwind gray-900 */
  border: none;
  box-shadow: none;
  transition: all 160ms ease-in-out;
  cursor: default;
}

.platform-badge:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
  background-color: var(--color-accent-orange);
  color: white;
}

.dark .platform-badge {
  background-color: rgba(255, 255, 255, 0.05);
  color: rgba(255, 255, 255, 0.9);
}

.dark .platform-badge:hover {
  background-color: var(--color-accent-green);
  color: white;
}

/* Consistent sizing for game card images across breakpoints */
/* NOTE: `@apply` can cause issues in some linters/builds; using utility classes inline for consistent sizing (
   the `Image` component uses `h-44 sm:h-48 md:h-56 lg:h-64 w-full rounded-lg shadow-2xl object-cover`). */

/* Novel.sh Editor Styles - Updated */
.editor-container {
  width: 100%;
  display: flex;
  flex-direction: column;
}

.editor-content-wrapper {
  width: 100%;
  box-sizing: border-box;
}

.ProseMirror {
  @apply p-12 px-8 sm:px-12 overflow-hidden;
}

/* Placeholder styling - shows when editor is empty with slash command hint */
.ProseMirror .is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  color: rgba(0, 0, 0, 0.4);
  pointer-events: none;
  height: 0;
}

.ProseMirror .is-empty::before {
  content: attr(data-placeholder);
  float: left;
  color: rgba(0, 0, 0, 0.4);
  pointer-events: none;
  height: 0;
}

.dark .ProseMirror .is-editor-empty:first-child::before {
  color: rgba(255, 255, 255, 0.4);
}

.dark .ProseMirror .is-empty::before {
  color: rgba(255, 255, 255, 0.4);
}

/* FIXED: Enhanced image styling with better feedback */
.ProseMirror img {
  transition: all 0.2s ease-in-out;
  border-radius: 0.5rem;
  max-width: 100%;
  height: auto;
  display: block;
  margin: 1.5rem auto;
}

.ProseMirror img:hover {
  cursor: pointer;
  filter: brightness(90%);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  transform: translateY(-2px);
}

.ProseMirror img.ProseMirror-selectednode {
  outline: 3px solid var(--color-accent-orange);
  filter: brightness(90%);
  box-shadow: 0 8px 20px rgba(249, 115, 22, 0.3);
}

.dark .ProseMirror img.ProseMirror-selectednode {
  outline-color: var(--color-accent-green);
  box-shadow: 0 8px 20px rgba(22, 163, 74, 0.3);
}

.ProseMirror:not(.dragging) .ProseMirror-selectednode {
  outline: none !important;
  background-color: var(--novel-highlight-blue);
  transition: background-color 0.2s;
  box-shadow: none;
}

/* FIXED: Drag handle with intelligent viewport positioning */
.drag-handle {
  position: fixed;
  opacity: 1;
  transition: opacity ease-in 0.2s;
  border-radius: 0.25rem;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 10 10' style='fill: rgba(0, 0, 0, 0.5)'%3E%3Cpath d='M3,2 C2.44771525,2 2,1.55228475 2,1 C2,0.44771525 2.44771525,0 3,0 C3.55228475,0 4,0.44771525 4,1 C4,1.55228475 3.55228475,2 3,2 Z M3,6 C2.44771525,6 2,5.55228475 2,5 C2,4.44771525 2.44771525,4 3,4 C3.55228475,4 4,4.44771525 4,5 C4,5.55228475 3.55228475,6 3,6 Z M3,10 C2.44771525,10 2,9.55228475 2,9 C2,8.44771525 2.44771525,8 3,8 C3.55228475,8 4,8.44771525 4,9 C4,9.55228475 3.55228475,10 3,10 Z M7,2 C6.44771525,2 6,1.55228475 6,1 C6,0.44771525 6.44771525,0 7,0 C7.55228475,0 8,0.44771525 8,1 C8,1.55228475 7.55228475,2 7,2 Z M7,6 C6.44771525,6 6,5.55228475 6,5 C6,4.44771525 6.44771525,4 7,4 C7.55228475,4 8,4.44771525 8,5 C8,5.55228475 7.55228475,6 7,6 Z M7,10 C6.44771525,10 6,9.55228475 6,9 C6,8.44771525 6.44771525,8 7,8 C7.55228475,8 8,8.44771525 8,9 C8,9.55228475 7.55228475,10 7,10 Z'%3E%3C/path%3E%3C/svg%3E");
  background-size: calc(0.5em + 0.375rem) calc(0.5em + 0.375rem);
  background-repeat: no-repeat;
  background-position: center;
  width: 1.2rem;
  height: 1.5rem;
  z-index: 50;
  cursor: grab;
  will-change: transform;
  /* Add visual boundaries to prevent off-screen positioning */
  max-width: calc(100vw - 1.5rem);
  max-height: calc(100vh - 1.5rem);
}

.drag-handle:hover {
  background-color: var(--novel-stone-100);
  transition: background-color 0.2s;
}

.drag-handle:active {
  background-color: var(--novel-stone-200);
  transition: background-color 0.2s;
  cursor: grabbing;
}

.drag-handle.hide {
  opacity: 0;
  pointer-events: none;
}

@media screen and (max-width: 600px) {
  .drag-handle {
    display: none;
    pointer-events: none;
  }
}

.dark .drag-handle {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 10 10' style='fill: rgba(255, 255, 255, 0.5)'%3E%3Cpath d='M3,2 C2.44771525,2 2,1.55228475 2,1 C2,0.44771525 2.44771525,0 3,0 C3.55228475,0 4,0.44771525 4,1 C4,1.55228475 3.55228475,2 3,2 Z M3,6 C2.44771525,6 2,5.55228475 2,5 C2,4.44771525 2.44771525,4 3,4 C3.55228475,4 4,4.44771525 4,5 C4,5.55228475 3.55228475,6 3,6 Z M3,10 C2.44771525,10 2,9.55228475 2,9 C2,8.44771525 2.44771525,8 3,8 C3.55228475,8 4,8.44771525 4,9 C4,9.55228475 3.55228475,10 3,10 Z M7,2 C6.44771525,2 6,1.55228475 6,1 C6,0.44771525 6.44771525,0 7,0 C7.55228475,0 8,0.44771525 8,1 C8,1.55228475 7.55228475,2 7,2 Z M7,6 C6.44771525,6 6,5.55228475 6,5 C6,4.44771525 6.44771525,4 7,4 C7.55228475,4 8,4.44771525 8,5 C8,5.55228475 7.55228475,6 7,6 Z M7,10 C6.44771525,10 6,9.55228475 6,9 C6,8.44771525 6.44771525,8 7,8 C7.55228475,8 8,8.44771525 8,9 C8,9.55228475 7.55228475,10 7,10 Z'%3E%3C/path%3E%3C/svg%3E");
}

/* Intelligent viewport boundary management */
.drag-handle-constraints {
  /* Prevent drag handle from scrolling off viewport */
  position: fixed;
  will-change: transform;
}

/* Ensure editor allows drag handle to be positioned correctly */
.editor-container {
  position: relative;
  overflow: visible;
}

.ProseMirror[data-drag-target] {
  /* Allow proper positioning of drag handle during drag operations */
  position: relative;
  overflow: visible !important;
}

/* Novel.sh Editor List Styles - Override blog-content */
.ProseMirror .novel-bullet-list,
.ProseMirror ul:not([data-type="taskList"]) {
  list-style: disc !important;
  list-style-position: outside;
  margin: 1rem 0;
  padding-left: 2rem !important;
  clear: none;
  width: 100%;
}

.ProseMirror .novel-ordered-list,
.ProseMirror ol {
  list-style: decimal !important;
  list-style-position: outside;
  margin: 1rem 0;
  padding-left: 2rem !important;
  clear: none;
  width: 100%;
}

.ProseMirror .novel-list-item,
.ProseMirror li {
  margin: 0.5rem 0;
  padding-left: 0 !important;
  line-height: 1.5;
  color: inherit;
  clear: none;
  list-style: disc;
}

.ProseMirror .novel-list-item::before {
  display: none;
}

/* Prevent placeholder from appearing in list items */
.ProseMirror li.is-empty::before {
  display: none !important;
}

/* Task list styles */
ul[data-type="taskList"] {
  list-style: none;
  margin: 1rem 0;
  padding-left: 0;
}

ul[data-type="taskList"] li > label {
  margin-right: 0.2rem;
  user-select: none;
  display: flex;
  align-items: center;
}

@media screen and (max-width: 768px) {
  ul[data-type="taskList"] li > label {
    margin-right: 0.5rem;
  }
}

/* Prevent placeholder in task lists */
ul[data-type="taskList"] li p.is-empty::before {
  display: none !important;
}

ul[data-type="taskList"] li > label input[type="checkbox"] {
  -webkit-appearance: none;
  appearance: none;
  background-color: #ffffff;
  margin: 0;
  cursor: pointer;
  width: 1.2em;
  height: 1.2em;
  position: relative;
  top: 3px;
  border: 2px solid #000000;
  margin-right: 0.5rem;
  display: grid;
  place-content: center;
  flex-shrink: 0;
}

ul[data-type="taskList"] li > label input[type="checkbox"]:hover {
  background-color: var(--color-accent-orange);
  border-color: var(--color-accent-orange);
}

ul[data-type="taskList"] li > label input[type="checkbox"]::before {
  content: "";
  width: 0.65em;
  height: 0.65em;
  transform: scale(0);
  transition: 120ms transform ease-in-out;
  box-shadow: inset 1em 1em #000000;
  transform-origin: center;
  clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%);
}

ul[data-type="taskList"] li > label input[type="checkbox"]:checked {
  background-color: #ffffff;
  border-color: #000000;
}

ul[data-type="taskList"] li > label input[type="checkbox"]:checked::before {
  transform: scale(1);
}

ul[data-type="taskList"] li[data-checked="true"] > div > p {
  opacity: 0.6;
  text-decoration: line-through;
  text-decoration-thickness: 1px;
}

/* Dark mode task list styles */
.dark ul[data-type="taskList"] li > label input[type="checkbox"] {
  background-color: #000000;
  border-color: #ffffff;
}

.dark ul[data-type="taskList"] li > label input[type="checkbox"]:hover {
  background-color: var(--color-accent-green);
  border-color: var(--color-accent-green);
}

.dark ul[data-type="taskList"] li > label input[type="checkbox"]::before {
  box-shadow: inset 1em 1em #ffffff;
}

.dark ul[data-type="taskList"] li > label input[type="checkbox"]:checked {
  background-color: #000000;
  border-color: #ffffff;
}

/* Tippy tooltip */
.tippy-box {
  max-width: 400px !important;
}

/* Slash command menu styling */
#slash-command {
  --color-bg: #ffffff;
  --color-text: #0b0b0b;
  --color-border: #e5e7eb;
}

.dark #slash-command {
  --color-bg: #000000;
  --color-text: #e6e6e6;
  --color-border: #2b2b2b;
}

/* Ensure slash command items don't have distorted text */
#slash-command [cmdk-item] {
  padding: 0.375rem 0.5rem;
  margin: 0;
  line-height: 1.5;
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
}

/* Command item title and description layout */
#slash-command [cmdk-item] > div:last-child {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-width: 0;
  gap: 0.125rem;
}

#slash-command [cmdk-item] p:first-of-type {
  margin: 0;
  font-weight: 500;
  line-height: 1.25;
  white-space: normal;
  word-break: break-word;
}

#slash-command [cmdk-item] p:last-of-type {
  margin: 0;
  font-size: 0.75rem;
  line-height: 1.25;
  white-space: normal;
  word-break: break-word;
  overflow: visible;
  display: block;
  max-width: 100%;
}

/* Icon container alignment */
#slash-command [cmdk-item] > div:first-child {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Prevent placeholder text from showing in nested elements only */
.ProseMirror ul.is-empty::before,
.ProseMirror ol.is-empty::before,
.ProseMirror li.is-empty::before,
.ProseMirror li > p.is-empty::before,
.ProseMirror blockquote.is-empty::before,
.ProseMirror h1.is-empty::before,
.ProseMirror h2.is-empty::before,
.ProseMirror h3.is-empty::before,
.ProseMirror h4.is-empty::before,
.ProseMirror h5.is-empty::before,
.ProseMirror h6.is-empty::before,
.ProseMirror code.is-empty::before,
.ProseMirror pre.is-empty::before {
  display: none !important;
}

/* Bold and mark color inheritance */
span[style] > strong {
  color: inherit;
}

mark[style] > strong {
  color: inherit;
}

/* Enhanced Novel Editor UI/UX Improvements */

/* Editor container with better visual hierarchy */
.editor-container {
  border: 1px solid var(--color-border);
  border-radius: 0.5rem;
  overflow: hidden;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

.dark .editor-container {
  border-color: var(--color-border-dark);
  box-shadow: none;
}

.editor-content-wrapper {
  background-color: var(--color-bg);
  color: var(--color-text);
}

.dark .editor-content-wrapper {
  background-color: var(--color-bg-dark);
  color: var(--color-text-dark);
}

/* Improved ProseMirror base styling */
.ProseMirror {
  outline: none;
  transition: all 0.2s ease-in-out;
}

.ProseMirror:focus {
  box-shadow: 0 0 0 2px var(--color-accent-orange);
  outline: 2px solid var(--color-accent-orange);
}

.dark .ProseMirror:focus {
  box-shadow: 0 0 0 2px var(--color-accent-green);
  outline-color: var(--color-accent-green);
}

/* Better separator/divider styling */
.ProseMirror hr {
  margin: 2rem 0;
  border: none;
  border-top: 2px solid rgba(249, 115, 22, 0.3);
}

.dark .ProseMirror hr {
  border-top-color: rgba(22, 163, 74, 0.3);
}

/* Better emphasis/mark styling */
.ProseMirror mark {
  background-color: rgba(249, 115, 22, 0.2);
  padding: 0.125rem 0.25rem;
  border-radius: 0.25rem;
}

.dark .ProseMirror mark {
  background-color: rgba(22, 163, 74, 0.2);
}

/* Improved link styling in editor */
.ProseMirror a {
  color: var(--color-accent-orange);
  text-decoration: underline;
  transition: all 0.2s;
}

.ProseMirror a:hover {
  filter: brightness(0.9);
}

.dark .ProseMirror a {
  color: var(--color-accent-green);
}

/* Image loading state */
.ProseMirror img.loading {
  opacity: 0.5;
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Image error state */
.ProseMirror img.error {
  border: 2px solid #ef4444;
  opacity: 0.5;
}

/* Image caption styling */
.ProseMirror .image-caption {
  font-size: 0.875rem;
  color: rgba(0, 0, 0, 0.6);
  font-style: italic;
  margin-top: 0.5rem;
  text-align: center;
}

.dark .ProseMirror .image-caption {
  color: rgba(255, 255, 255, 0.6);
}

/* Better blockquote styling in editor */
.ProseMirror blockquote {
  border-left: 4px solid var(--color-accent-orange);
  padding-left: 1rem;
  font-style: italic;
  color: rgba(0, 0, 0, 0.7);
  margin: 1rem 0;
  padding-top: 0.5rem;
  padding-bottom: 0.5rem;
  background-color: rgba(249, 115, 22, 0.05);
}

.dark .ProseMirror blockquote {
  border-left-color: var(--color-accent-green);
  color: rgba(255, 255, 255, 0.7);
  background-color: rgba(22, 163, 74, 0.05);
}

/* Code block styling improvements */
.ProseMirror pre {
  background-color: #1f1f1f;
  color: #ffffff;
  border-radius: 0.5rem;
  padding: 1rem;
  overflow-x: auto;
  margin: 1rem 0;
  border: 1px solid #333333;
  font-family: var(--font-jetbrains-mono), monospace;
}

.dark .ProseMirror pre {
  background-color: #0a0a0a;
  border-color: #444444;
}

.ProseMirror pre code {
  font-size: 0.875rem;
  font-weight: 500;
}

/* Heading styling in editor with visual hierarchy */
.ProseMirror h1 {
  font-size: 2.25rem;
  font-weight: 700;
  margin: 1.5rem 0 1rem;
  line-height: 1.2;
  color: #000;
}

.dark .ProseMirror h1 {
  color: #fff;
}

.ProseMirror h2 {
  font-size: 1.875rem;
  font-weight: 700;
  margin: 1.5rem 0 0.75rem;
  line-height: 1.3;
  border-bottom: 2px solid rgba(249, 115, 22, 0.3);
  padding-bottom: 0.5rem;
  color: #000;
}

.dark .ProseMirror h2 {
  border-bottom-color: rgba(22, 163, 74, 0.3);
  color: #fff;
}

/* Better list styling */
.ProseMirror ul:not([data-type="taskList"]),
.ProseMirror ol {
  margin: 1rem 0;
  padding-left: 2rem;
}

.ProseMirror li {
  margin: 0.5rem 0;
  padding-left: 0;
  color: var(--color-text);
  line-height: 1.6;
}

/* Paragraph spacing */
.ProseMirror p {
  margin: 0.75rem 0;
  color: var(--color-text);
  line-height: 1.625;
}

/* Command menu improvements - more visible and accessible */
.EditorCommand {
  background-color: #fff;
  border: 2px solid #000;
  border-radius: 0.5rem;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  padding: 0.5rem;
  max-height: 330px;
  overflow-y: auto;
  z-index: 50;
}

.dark .EditorCommand {
  background-color: #000;
  border-color: var(--color-accent-green);
  box-shadow: 0 10px 25px rgba(22, 163, 74, 0.2);
}

.EditorCommandEmpty {
  padding: 0.5rem 0.75rem;
  font-size: 0.875rem;
  color: rgba(0, 0, 0, 0.5);
  text-align: center;
}

.dark .EditorCommandEmpty {
  color: rgba(255, 255, 255, 0.5);
}

.EditorCommandItem {
  display: flex;
  width: 100%;
  align-items: center;
  gap: 0.75rem;
  border-radius: 0.375rem;
  padding: 0.75rem;
  font-size: 0.875rem;
  cursor: pointer;
  transition: all 0.15s;
  color: var(--color-text);
}

.EditorCommandItem:hover {
  background-color: rgba(249, 115, 22, 0.1);
  transform: translateX(0.25rem);
}

.dark .EditorCommandItem:hover {
  background-color: rgba(22, 163, 74, 0.15);
}

.EditorCommandItem[aria-selected="true"] {
  background-color: rgba(249, 115, 22, 0.2);
}

.dark .EditorCommandItem[aria-selected="true"] {
  background-color: rgba(22, 163, 74, 0.25);
}

/* Icon container for command items */
.command-icon-container {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 0.375rem;
  border: 1px solid var(--color-accent-orange);
  background-color: rgba(249, 115, 22, 0.1);
  flex-shrink: 0;
}

.dark .command-icon-container {
  border-color: var(--color-accent-green);
  background-color: rgba(22, 163, 74, 0.1);
}

/* Hide common Disqus ad containers (helps remove empty ad spaces if ads are blocked by CSP) */
.dsq-brlink,
.dsq-ad,
.dsq-sponsored,
.dsq-ads,
.dsq-ad-container {
  display: none !important;
}

/* Hide Disqus ad iframes using sandbox attribute (latest method) */
#disqus_thread > iframe[sandbox] {
  display: none !important;
}
